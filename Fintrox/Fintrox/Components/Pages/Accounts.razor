@page "/accounts"
@inject HttpClient Http

<h3>Сметкоплан</h3>

@if (accounts == null)
{
    <p>Зареждане…</p>
}
else
{
    <table class="table table-sm">
        <thead><tr><th>Код</th><th>Име</th><th>Тип</th></tr></thead>
        <tbody>
            @foreach (var a in accounts)
            {
                <tr>
                    <td>@a.code</td>
                    <td>@a.name</td>
                    <td>@a.type</td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    private List<AccountVm>? accounts;
    protected override async Task OnInitializedAsync()
        => accounts = await Http.GetFromJsonAsync<List<AccountVm>>("/api/accounts");

    record AccountVm(Guid id, string code, string name, string type);
}
